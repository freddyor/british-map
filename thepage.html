<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive POI Map</title>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.14.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.14.0/mapbox-gl.css" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; }
        #map { position: absolute; width: 100%; height: 100%; }
        
        /* Info Panel */
        .info-panel {
            position: fixed; top: 100%; left: 0; width: 100%; height: 100%;
            background: white; transition: top 0.4s ease-in-out; padding: 20px;
            box-shadow: 0px -2px 10px rgba(0, 0, 0, 0.2); overflow-y: auto;
        }
        .info-panel.active { top: 0; }
        .close-btn { position: absolute; top: 20px; right: 20px; font-size: 30px; cursor: pointer; }
        .info-image { width: 100%; border-radius: 10px; max-height: 250px; object-fit: cover; }
        .info-content { padding: 15px; text-align: center; }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="info-panel" id="infoPanel">
        <span class="close-btn" onclick="closePanel()">âœ–</span>
        <div class="info-content">
            <h2 id="poiTitle"></h2>
            <img id="poiImage" class="info-image" src="" alt="">
            <p id="poiDescription"></p>
        </div>
    </div>

    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZnJlZGRvbWF0ZSIsImEiOiJjbTc1bm5zYnQwaG1mMmtxeDdteXNmeXZ0In0.PuDNORq4qExIJ_fErdO_8g';
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/freddomate/cm75okjwo009201r0cj1n28so',  <!-- Your new Mapbox style URL -->
            center: [-1.0815, 53.9590],  <!-- Coordinates for York Minster -->
            zoom: 15  <!-- Adjust zoom level as needed -->
        });

        const pois = {
            "type": "FeatureCollection",
            "features": [
                {
                    "type": "Feature",
                    "geometry": { "type": "Point", "coordinates": [-1.0815, 53.9590] },  <!-- Coordinates for York Minster -->
                    "properties": {
                        "title": "York Minster",
                        "description": "A famous Gothic cathedral in York.",
                        "image": "https://upload.wikimedia.org/wikipedia/commons/d/d7/York_Minster_from_the_entrance.jpg"
                    }
                }
            ]
        };

        map.on('load', function () {
            map.addSource('pois', { 'type': 'geojson', 'data': pois });

            map.addLayer({
                'id': 'pois',
                'type': 'symbol',
                'source': 'pois',
                'layout': {
                    'icon-image': 'marker-15',
                    'text-field': ['get', 'title'],
                    'text-offset': [0, 1.2],
                    'text-anchor': 'top'
                }
            });

            map.on('click', 'pois', function (e) {
                const feature = e.features[0];
                document.getElementById('poiTitle').textContent = feature.properties.title;
                document.getElementById('poiDescription').textContent = feature.properties.description;
                document.getElementById('poiImage').src = feature.properties.image;
                document.getElementById('infoPanel').classList.add('active');
            });

            map.on('mouseenter', 'pois', () => map.getCanvas().style.cursor = 'pointer');
            map.on('mouseleave', 'pois', () => map.getCanvas().style.cursor = '');
        });

        function closePanel() {
            document.getElementById('infoPanel').classList.remove('active');
        }
    </script>
</body>
</html>
